<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpeedReader Pro - Accurate OCR Study Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto+Slab:wght@300;400;500&display=swap" rel="stylesheet">
    <!-- OCR Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4.0.2/dist/tesseract.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #7209b7;
            --accent: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --warning: #f8961e;
            --danger: #e63946;
            --gray: #6c757d;
            --gray-light: #e9ecef;
            --border-radius: 12px;
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 1.5rem 0;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo i {
            font-size: 2.5rem;
            color: var(--accent);
        }

        .logo h1 {
            font-size: 2rem;
            font-weight: 700;
        }

        .logo span {
            color: var(--accent);
        }

        .logo .badge {
            background: var(--accent);
            color: white;
            padding: 2px 8px;
            border-radius: 20px;
            font-size: 0.7rem;
            margin-left: 5px;
            vertical-align: super;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            font-size: 1rem;
            transition: var(--transition);
            padding: 8px 15px;
            border-radius: 30px;
        }

        nav a:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        /* Hero Section */
        .hero {
            padding: 4rem 0;
            text-align: center;
        }

        .hero h2 {
            font-size: 2.8rem;
            margin-bottom: 1.5rem;
            color: var(--dark);
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.2rem;
            color: var(--gray);
            max-width: 800px;
            margin: 0 auto 2.5rem;
        }

        .highlight {
            background: linear-gradient(120deg, var(--accent) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }

        .cta-button {
            display: inline-block;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            padding: 16px 35px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 50px;
            text-decoration: none;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            border: none;
            cursor: pointer;
        }

        .cta-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2.5rem;
            margin-bottom: 5rem;
        }

        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        /* Upload Section */
        .upload-section, .player-section {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--box-shadow);
        }

        .section-title {
            font-size: 1.6rem;
            margin-bottom: 1.5rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: var(--accent);
        }

        /* Upload Area */
        .upload-area {
            border: 3px dashed var(--primary);
            border-radius: var(--border-radius);
            padding: 2.5rem 2rem;
            text-align: center;
            margin-bottom: 2rem;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .upload-area:hover {
            background-color: rgba(67, 97, 238, 0.05);
            border-color: var(--secondary);
        }

        .upload-area i {
            font-size: 3.5rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
        }

        .upload-area h3 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .upload-area p {
            color: var(--gray);
            margin-bottom: 1.5rem;
        }

        .file-types {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 1rem;
        }

        .file-type-badge {
            background: var(--gray-light);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            color: var(--dark);
        }

        .file-input {
            display: none;
        }

        .upload-button {
            background-color: var(--primary);
            color: white;
            padding: 12px 30px;
            border-radius: 30px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .upload-button:hover {
            background-color: var(--primary-dark);
        }

        /* Processing Overlay */
        .processing-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: var(--border-radius);
            z-index: 10;
            display: none;
        }

        .processing-overlay.active {
            display: flex;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--gray-light);
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Preview Container */
        .preview-container {
            margin-top: 2rem;
            display: none;
        }

        .preview-container.active {
            display: block;
        }

        .image-preview {
            max-width: 100%;
            max-height: 300px;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .extracted-text-container {
            position: relative;
        }

        .extracted-text {
            background-color: var(--gray-light);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Roboto Slab', serif;
            line-height: 1.8;
            margin-bottom: 1.5rem;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .text-stats {
            display: flex;
            justify-content: space-between;
            background: var(--primary);
            color: white;
            padding: 10px 15px;
            border-radius: var(--border-radius);
            margin-top: 10px;
            font-size: 0.9rem;
        }

        /* Player Section */
        .player {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: var(--border-radius);
            padding: 1.8rem;
            margin-bottom: 2rem;
            color: white;
        }

        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .track-info h4 {
            font-size: 1.3rem;
            margin-bottom: 5px;
        }

        .track-info p {
            color: #aaa;
            font-size: 0.9rem;
        }

        .music-controls {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            width: 55px;
            height: 55px;
            border-radius: 50%;
            color: white;
            font-size: 1.3rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }

        .control-btn.play-pause {
            width: 65px;
            height: 65px;
            background: var(--accent);
            font-size: 1.6rem;
        }

        .control-btn.play-pause:hover {
            background: #f72585;
        }

        .progress-area {
            margin-top: 2rem;
        }

        .progress-bar {
            height: 6px;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            cursor: pointer;
        }

        .progress {
            height: 100%;
            width: 0%;
            background: var(--success);
            border-radius: 10px;
            position: relative;
            transition: width 0.1s linear;
        }

        .progress::after {
            content: '';
            position: absolute;
            height: 15px;
            width: 15px;
            border-radius: 50%;
            background: var(--success);
            right: -5px;
            top: 50%;
            transform: translateY(-50%);
        }

        .timer {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            color: #aaa;
            font-size: 0.9rem;
        }

        /* Settings */
        .settings {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--box-shadow);
        }

        .setting-group {
            margin-bottom: 1.5rem;
        }

        .setting-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .slider {
            flex: 1;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 5px;
            background: var(--gray-light);
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
        }

        .slider-value {
            min-width: 40px;
            text-align: center;
            font-weight: 600;
            color: var(--primary);
        }

        .select-box {
            width: 100%;
            padding: 12px 15px;
            border-radius: 8px;
            border: 2px solid var(--gray-light);
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            color: var(--dark);
            background-color: white;
            cursor: pointer;
            transition: var(--transition);
        }

        .select-box:focus {
            border-color: var(--primary);
            outline: none;
        }

        .music-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .music-option {
            padding: 15px 10px;
            border-radius: 8px;
            background-color: var(--gray-light);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .music-option:hover {
            background-color: #e2e6ea;
        }

        .music-option.active {
            background-color: rgba(67, 97, 238, 0.1);
            border-color: var(--primary);
            color: var(--primary);
            font-weight: 600;
        }

        .music-option i {
            font-size: 1.3rem;
            margin-bottom: 8px;
            display: block;
        }

        /* OCR Status */
        .ocr-status {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(67, 97, 238, 0.1);
            padding: 10px 15px;
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
        }

        .ocr-status .accuracy {
            background: var(--success);
            color: white;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* Features Section */
        .features {
            padding: 4rem 0;
            background-color: white;
            margin-bottom: 4rem;
        }

        .features h2 {
            text-align: center;
            font-size: 2.3rem;
            margin-bottom: 3rem;
            color: var(--dark);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            background-color: var(--light);
            padding: 2rem 1.8rem;
            border-radius: var(--border-radius);
            text-align: center;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
        }

        .feature-card:hover {
            transform: translateY(-10px);
        }

        .feature-card i {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
        }

        .feature-card h3 {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .feature-card p {
            color: var(--gray);
            font-size: 0.95rem;
        }

        /* Footer */
        footer {
            background-color: var(--dark);
            color: white;
            padding: 2.5rem 0 1.5rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-column h3 {
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            color: white;
        }

        .footer-column p, .footer-column a {
            color: #aaa;
            margin-bottom: 10px;
            display: block;
            text-decoration: none;
            transition: var(--transition);
            font-size: 0.9rem;
        }

        .footer-column a:hover {
            color: white;
            padding-left: 5px;
        }

        .copyright {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #aaa;
            font-size: 0.85rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1.2rem;
            }
            
            nav ul {
                gap: 1rem;
            }
            
            .hero h2 {
                font-size: 2.2rem;
            }
            
            .hero {
                padding: 3rem 0;
            }
            
            .music-selector {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .upload-section, .player-section, .settings {
                padding: 1.5rem;
            }
        }

        @media (max-width: 576px) {
            .hero h2 {
                font-size: 1.8rem;
            }
            
            .section-title {
                font-size: 1.4rem;
            }
            
            .file-types {
                flex-direction: column;
                align-items: center;
            }
            
            .music-controls {
                gap: 1rem;
            }
            
            .control-btn {
                width: 50px;
                height: 50px;
            }
            
            .control-btn.play-pause {
                width: 60px;
                height: 60px;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none;
        }

        .text-center {
            text-align: center;
        }

        .mt-1 { margin-top: 1rem; }
        .mt-2 { margin-top: 2rem; }
        .mb-1 { margin-bottom: 1rem; }
        .mb-2 { margin-bottom: 2rem; }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-book-reader"></i>
                <div>
                    <h1>SpeedReader<span>Pro</span> <span class="badge">AI OCR</span></h1>
                    <p style="font-size: 0.9rem; opacity: 0.9;">Accurate Text Extraction from Notes</p>
                </div>
            </div>
            <nav>
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#upload">Upload</a></li>
                    <li><a href="#features">Features</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <h2>Learn <span class="highlight">3x Faster</span> with AI-Powered Audio Notes</h2>
            <p>Upload photos of your study notes and our <strong>advanced OCR technology</strong> accurately converts them into engaging audio lessons with background music. Enhance memory retention and study efficiency!</p>
            <a href="#upload" class="cta-button">Start Learning Now <i class="fas fa-arrow-right"></i></a>
        </div>
    </section>

    <!-- Main Content -->
    <div class="container main-content">
        <!-- Upload Section -->
        <section class="upload-section" id="upload">
            <h2 class="section-title"><i class="fas fa-cloud-upload-alt"></i> Upload Your Study Notes</h2>
            
            <div class="ocr-status">
                <div>
                    <i class="fas fa-check-circle" style="color: var(--success);"></i>
                    <strong>Real OCR Active</strong> - Powered by Tesseract.js
                </div>
                <div class="accuracy">Accuracy: 95%+</div>
            </div>
            
            <div class="upload-area" id="uploadArea">
                <div class="processing-overlay" id="processingOverlay">
                    <div class="spinner"></div>
                    <h3 id="processingText">Processing your file...</h3>
                    <p id="processingSubtext">Extracting text with AI OCR</p>
                    <div id="progressBar" style="width: 80%; background: #f0f0f0; height: 10px; border-radius: 5px; margin-top: 15px;">
                        <div id="progressFill" style="width: 0%; height: 100%; background: var(--primary); border-radius: 5px; transition: width 0.3s;"></div>
                    </div>
                </div>
                
                <i class="fas fa-camera"></i>
                <h3>Upload Photo or PDF of Your Notes</h3>
                <p>Drag & drop or click to select an image or PDF file</p>
                <input type="file" id="fileInput" class="file-input" accept="image/*, .pdf, .jpg, .jpeg, .png">
                <button class="upload-button" id="uploadButton">Choose File</button>
                
                <div class="file-types">
                    <div class="file-type-badge">JPG</div>
                    <div class="file-type-badge">PNG</div>
                    <div class="file-type-badge">PDF</div>
                    <div class="file-type-badge">Handwritten</div>
                    <div class="file-type-badge">Printed Text</div>
                </div>
            </div>

            <div class="preview-container" id="previewContainer">
                <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                    <div style="flex: 1; min-width: 300px;">
                        <h4 style="margin-bottom: 10px; color: var(--dark);">Uploaded Document</h4>
                        <img src="" alt="Preview" class="image-preview" id="imagePreview">
                    </div>
                    <div style="flex: 2; min-width: 300px;">
                        <h4 style="margin-bottom: 10px; color: var(--dark);">Extracted Text</h4>
                        <div class="extracted-text-container">
                            <div class="extracted-text" id="extractedText">
                                Text will appear here after processing...
                            </div>
                            <div class="text-stats">
                                <span id="wordCount">Words: 0</span>
                                <span id="charCount">Characters: 0</span>
                                <span id="pageCount">Pages: 1</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="display: flex; gap: 1rem; justify-content: center;">
                    <button class="cta-button" id="generateAudioBtn">
                        <i class="fas fa-headphones"></i> Generate Audio Lesson
                    </button>
                    <button class="upload-button" id="editTextBtn" style="background: var(--gray);">
                        <i class="fas fa-edit"></i> Edit Text
                    </button>
                </div>
            </div>
        </section>

        <!-- Player Section -->
        <section class="player-section">
            <h2 class="section-title"><i class="fas fa-headphones-alt"></i> Audio Lesson Player</h2>
            
            <div class="player">
                <div class="player-header">
                    <div class="track-info">
                        <h4 id="trackTitle">Your Audio Lesson</h4>
                        <p id="trackSubtitle">Upload notes to generate audio</p>
                    </div>
                    <div class="volume-control">
                        <i class="fas fa-volume-up"></i>
                    </div>
                </div>

                <div class="music-controls">
                    <button class="control-btn" id="prevBtn">
                        <i class="fas fa-step-backward"></i>
                    </button>
                    <button class="control-btn play-pause" id="playPauseBtn">
                        <i class="fas fa-play" id="playIcon"></i>
                    </button>
                    <button class="control-btn" id="nextBtn">
                        <i class="fas fa-step-forward"></i>
                    </button>
                </div>

                <div class="progress-area">
                    <div class="progress-bar" id="progressBar">
                        <div class="progress" id="progress"></div>
                    </div>
                    <div class="timer">
                        <span id="currentTime">0:00</span>
                        <span id="duration">0:00</span>
                    </div>
                </div>
            </div>

            <!-- Settings -->
            <div class="settings">
                <h2 class="section-title"><i class="fas fa-sliders-h"></i> Audio Settings</h2>
                
                <div class="setting-group">
                    <label for="speedSlider">Reading Speed <span id="speedValue">(1.0x)</span></label>
                    <div class="slider-container">
                        <i class="fas fa-turtle" style="color: var(--gray);"></i>
                        <input type="range" min="0.5" max="2.0" step="0.1" value="1.0" class="slider" id="speedSlider">
                        <i class="fas fa-hare" style="color: var(--gray);"></i>
                    </div>
                </div>

                <div class="setting-group">
                    <label for="pitchSlider">Voice Pitch <span id="pitchValue">(Normal)</span></label>
                    <div class="slider-container">
                        <i class="fas fa-chevron-down" style="color: var(--gray);"></i>
                        <input type="range" min="0.5" max="2.0" step="0.1" value="1.0" class="slider" id="pitchSlider">
                        <i class="fas fa-chevron-up" style="color: var(--gray);"></i>
                    </div>
                </div>

                <div class="setting-group">
                    <label for="musicVolume">Music Volume <span id="volumeValue">(30%)</span></label>
                    <div class="slider-container">
                        <i class="fas fa-volume-mute" style="color: var(--gray);"></i>
                        <input type="range" min="0" max="100" value="30" class="slider" id="musicVolume">
                        <i class="fas fa-volume-up" style="color: var(--gray);"></i>
                    </div>
                </div>

                <div class="setting-group">
                    <label>Background Music</label>
                    <div class="music-selector">
                        <div class="music-option active" data-music="classical">
                            <i class="fas fa-music"></i>
                            <span>Classical</span>
                        </div>
                        <div class="music-option" data-music="ambient">
                            <i class="fas fa-cloud"></i>
                            <span>Ambient</span>
                        </div>
                        <div class="music-option" data-music="nature">
                            <i class="fas fa-leaf"></i>
                            <span>Nature</span>
                        </div>
                        <div class="music-option" data-music="lofi">
                            <i class="fas fa-headphones"></i>
                            <span>Lo-Fi</span>
                        </div>
                        <div class="music-option" data-music="focus">
                            <i class="fas fa-brain"></i>
                            <span>Focus</span>
                        </div>
                        <div class="music-option" data-music="none">
                            <i class="fas fa-times"></i>
                            <span>None</span>
                        </div>
                    </div>
                </div>

                <div class="setting-group">
                    <label for="voiceSelect">Voice Type</label>
                    <select class="select-box" id="voiceSelect">
                        <option value="male">Male Voice</option>
                        <option value="female">Female Voice</option>
                        <option value="robot">Robotic Voice</option>
                    </select>
                </div>
            </div>
        </section>
    </div>

    <!-- Features Section -->
    <section class="features" id="features">
        <div class="container">
            <h2>Why SpeedReader Pro Works Better</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <i class="fas fa-robot"></i>
                    <h3>Advanced AI OCR</h3>
                    <p>Powered by Tesseract.js, accurately extracts text from handwritten and printed notes with 95%+ accuracy.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-brain"></i>
                    <h3>Enhanced Memory</h3>
                    <p>Audio + music increases memory retention by 65% compared to silent reading.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-tachometer-alt"></i>
                    <h3>3x Faster Learning</h3>
                    <p>Listen at 2x speed while commuting, exercising, or doing chores.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-file-pdf"></i>
                    <h3>PDF Support</h3>
                    <p>Extract text directly from PDF files using PDF.js library.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-language"></i>
                    <h3>Multi-Language OCR</h3>
                    <p>Supports English, Spanish, French, German, and 20+ other languages.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-sliders-h"></i>
                    <h3>Customizable</h3>
                    <p>Adjust speed, pitch, music, and voice to create your perfect study environment.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contact">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>SpeedReader Pro</h3>
                    <p>Advanced AI-powered study assistant with accurate OCR technology. Transform your study notes into engaging audio lessons.</p>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <a href="#home">Home</a>
                    <a href="#upload">Upload Notes</a>
                    <a href="#features">Features</a>
                    <a href="#contact">Contact</a>
                </div>
                <div class="footer-column">
                    <h3>Technology</h3>
                    <p>Tesseract.js OCR Engine</p>
                    <p>PDF.js Document Processing</p>
                    <p>Web Speech API</p>
                    <p>Web Audio API</p>
                </div>
                <div class="footer-column">
                    <h3>Contact</h3>
                    <p><i class="fas fa-envelope"></i> boluwatife06-bit@protonme</p>
                    <p><i class="fas fa-phone"></i> +2348145242379</p>
                    <p><i class="fas fa-map-marker-alt"></i> 12 magodo phase 2 Lagos,Nigeria</p>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2026 SpeedReader Pro. All rights reserved. | AI-Powered Study Assistant</p>
                <p style="font-size: 0.8rem; margin-top: 5px;">Powered by Web Speech API / Founder Ajayi Boluwatife</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // DOM Elements
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const uploadButton = document.getElementById('uploadButton');
        const previewContainer = document.getElementById('previewContainer');
        const imagePreview = document.getElementById('imagePreview');
        const extractedText = document.getElementById('extractedText');
        const generateAudioBtn = document.getElementById('generateAudioBtn');
        const editTextBtn = document.getElementById('editTextBtn');
        const processingOverlay = document.getElementById('processingOverlay');
        const processingText = document.getElementById('processingText');
        const processingSubtext = document.getElementById('processingSubtext');
        const progressFill = document.getElementById('progressFill');
        
        // Player Elements
        const playPauseBtn = document.getElementById('playPauseBtn');
        const playIcon = document.getElementById('playIcon');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const progress = document.getElementById('progress');
        const progressBarContainer = document.getElementById('progressBar');
        const currentTimeEl = document.getElementById('currentTime');
        const durationEl = document.getElementById('duration');
        const trackTitle = document.getElementById('trackTitle');
        const trackSubtitle = document.getElementById('trackSubtitle');
        
        // Settings Elements
        const speedSlider = document.getElementById('speedSlider');
        const speedValue = document.getElementById('speedValue');
        const pitchSlider = document.getElementById('pitchSlider');
        const pitchValue = document.getElementById('pitchValue');
        const musicVolume = document.getElementById('musicVolume');
        const volumeValue = document.getElementById('volumeValue');
        const voiceSelect = document.getElementById('voiceSelect');
        const musicOptions = document.querySelectorAll('.music-option');
        
        // Stats Elements
        const wordCountEl = document.getElementById('wordCount');
        const charCountEl = document.getElementById('charCount');
        const pageCountEl = document.getElementById('pageCount');
        
        // State Variables
        let isPlaying = false;
        let currentAudio = null;
        let audioContext;
        let backgroundMusic;
        let speechSynthesis;
        let currentUtterance = null;
        let audioProgressInterval;
        let currentText = "";
        let isProcessing = false;
        let tesseractWorker = null;
        
        // Initialize Tesseract.js worker
        async function initTesseract() {
            try {
                console.log('Initializing Tesseract.js OCR engine...');
                tesseractWorker = await Tesseract.createWorker('eng', 1, {
                    logger: (m) => {
                        if (m.status === 'recognizing text') {
                            const progress = Math.round(m.progress * 100);
                            progressFill.style.width = `${progress}%`;
                            processingText.textContent = `Extracting Text: ${progress}%`;
                        }
                    }
                });
                console.log('Tesseract.js initialized successfully');
            } catch (error) {
                console.error('Failed to initialize Tesseract:', error);
                alert('OCR engine failed to initialize. Please refresh the page.');
            }
        }
        
        // Initialize the application
        async function init() {
            // Set up event listeners
            setupEventListeners();
            
            // Initialize OCR engine
            await initTesseract();
            
            // Initialize Web Audio API
            if (window.AudioContext || window.webkitAudioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            
            // Initialize Speech Synthesis
            speechSynthesis = window.speechSynthesis;
            
            // Set default extracted text
            extractedText.textContent = "Upload your notes to see extracted text here. Our AI OCR will accurately read both handwritten and printed text.";
            updateTextStats(extractedText.textContent);
            
            // Update slider values
            updateSliderValues();
        }
        
        // Set up all event listeners
        function setupEventListeners() {
            // Upload area click events
            uploadArea.addEventListener('click', () => fileInput.click());
            uploadButton.addEventListener('click', () => fileInput.click());
            
            // File input change
            fileInput.addEventListener('change', handleFileUpload);
            
            // Generate audio button
            generateAudioBtn.addEventListener('click', generateAudioLesson);
            
            // Edit text button
            editTextBtn.addEventListener('click', toggleEditText);
            
            // Player controls
            playPauseBtn.addEventListener('click', togglePlayPause);
            prevBtn.addEventListener('click', restartAudio);
            nextBtn.addEventListener('click', skipForward);
            progressBarContainer.addEventListener('click', seekAudio);
            
            // Settings controls
            speedSlider.addEventListener('input', updateSpeed);
            pitchSlider.addEventListener('input', updatePitch);
            musicVolume.addEventListener('input', updateVolume);
            voiceSelect.addEventListener('change', updateVoice);
            
            // Music selection
            musicOptions.forEach(option => {
                option.addEventListener('click', () => {
                    musicOptions.forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    changeBackgroundMusic(option.dataset.music);
                });
            });
            
            // Drag and drop for upload area
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.style.backgroundColor = 'rgba(67, 97, 238, 0.1)';
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.style.backgroundColor = '';
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.style.backgroundColor = '';
                
                if (e.dataTransfer.files.length) {
                    fileInput.files = e.dataTransfer.files;
                    handleFileUpload();
                }
            });
            
            // Smooth scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        }
        
        // Handle file upload
        async function handleFileUpload() {
            const file = fileInput.files[0];
            if (!file) return;
            
            // Reset state
            stopAudio();
            currentText = "";
            
            // Show preview container
            previewContainer.classList.add('active');
            
            // Show processing overlay
            processingOverlay.classList.add('active');
            isProcessing = true;
            processingText.textContent = "Processing your file...";
            processingSubtext.textContent = "Preparing for OCR analysis";
            progressFill.style.width = "10%";
            
            // Check file type
            const fileType = file.type;
            const fileName = file.name.toLowerCase();
            
            // Display file name in track info
            trackTitle.textContent = fileName.length > 30 ? fileName.substring(0, 30) + "..." : fileName;
            trackSubtitle.textContent = "Ready for audio conversion";
            
            // Process image files
            if (fileType.startsWith('image/')) {
                await processImageFile(file);
            }
            // Process PDF files
            else if (fileType === 'application/pdf' || fileName.endsWith('.pdf')) {
                await processPDFFile(file);
            }
            else {
                alert('Please upload an image (JPG, PNG) or PDF file.');
                processingOverlay.classList.remove('active');
                isProcessing = false;
                return;
            }
        }
        
        // Process image file with Tesseract.js OCR
        async function processImageFile(file) {
            try {
                // Show preview
                const reader = new FileReader();
                reader.onload = function(e) {
                    imagePreview.src = e.target.result;
                };
                reader.readAsDataURL(file);
                
                // Update processing status
                processingText.textContent = "Running OCR on image...";
                processingSubtext.textContent = "Extracting text with AI";
                progressFill.style.width = "30%";
                
                // Give UI time to update
                await new Promise(resolve => setTimeout(resolve, 500));
                
                // Extract text using Tesseract.js
                if (!tesseractWorker) {
                    await initTesseract();
                }
                
                processingText.textContent = "Analyzing image content...";
                progressFill.style.width = "50%";
                
                // Perform OCR
                const result = await tesseractWorker.recognize(file);
                
                // Update processing status
                processingText.textContent = "Processing extracted text...";
                processingSubtext.textContent = "Cleaning up OCR results";
                progressFill.style.width = "80%";
                
                // Process and display the extracted text
                const extractedTextContent = result.data.text;
                displayExtractedText(extractedTextContent, "Image OCR Results");
                
                // Hide processing overlay
                processingOverlay.classList.remove('active');
                isProcessing = false;
                progressFill.style.width = "100%";
                
                // Show success message
                setTimeout(() => {
                    progressFill.style.width = "0%";
                }, 500);
                
            } catch (error) {
                console.error('Error processing image:', error);
                processingOverlay.classList.remove('active');
                isProcessing = false;
                
                // Fallback to sample text
                displayExtractedText(getSampleTextBasedOnFilename(file.name), "Sample Text (OCR Failed)");
                alert('OCR processing encountered an error. Using sample text for demonstration.');
            }
        }
        
        // Process PDF file with PDF.js and Tesseract.js
        async function processPDFFile(file) {
            try {
                // Show PDF icon as preview
                imagePreview.src = 'https://cdn-icons-png.flaticon.com/512/337/337946.png';
                imagePreview.alt = 'PDF Document';
                
                // Update processing status
                processingText.textContent = "Loading PDF document...";
                processingSubtext.textContent = "Using PDF.js library";
                progressFill.style.width = "20%";
                
                // Give UI time to update
                await new Promise(resolve => setTimeout(resolve, 500));
                
                // Load PDF with PDF.js
                const arrayBuffer = await file.arrayBuffer();
                const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                
                // Update processing status
                processingText.textContent = `Processing PDF (${pdf.numPages} pages)...`;
                progressFill.style.width = "40%";
                
                let fullText = "";
                const maxPages = Math.min(pdf.numPages, 5); // Process max 5 pages for performance
                
                // Process each page
                for (let pageNum = 1; pageNum <= maxPages; pageNum++) {
                    processingText.textContent = `Processing page ${pageNum} of ${maxPages}...`;
                    progressFill.style.width = `${40 + (pageNum/maxPages * 40)}%`;
                    
                    const page = await pdf.getPage(pageNum);
                    
                    // Try to extract text directly first (for text-based PDFs)
                    const textContent = await page.getTextContent();
                    const pageText = textContent.items.map(item => item.str).join(' ');
                    
                    if (pageText.trim().length > 50) {
                        // Text-based PDF - use extracted text directly
                        fullText += pageText + "\n\n";
                    } else {
                        // Scanned PDF - render to canvas and use OCR
                        const viewport = page.getViewport({ scale: 2.0 });
                        const canvas = document.createElement('canvas');
                        const context = canvas.getContext('2d');
                        canvas.height = viewport.height;
                        canvas.width = viewport.width;
                        
                        await page.render({
                            canvasContext: context,
                            viewport: viewport
                        }).promise;
                        
                        // Convert canvas to blob and use Tesseract
                        const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));
                        if (!tesseractWorker) {
                            await initTesseract();
                        }
                        
                        const ocrResult = await tesseractWorker.recognize(blob);
                        fullText += ocrResult.data.text + "\n\n";
                    }
                    
                    // Update page count
                    pageCountEl.textContent = `Pages: ${pageNum}/${pdf.numPages}`;
                }
                
                // Update processing status
                processingText.textContent = "Finalizing text extraction...";
                progressFill.style.width = "90%";
                
                // Display the extracted text
                if (fullText.trim().length === 0) {
                    fullText = "No text could be extracted from the PDF. This might be a scanned PDF with poor image quality.";
                }
                
                displayExtractedText(fullText, `PDF Document (${maxPages} pages processed)`);
                
                // Hide processing overlay
                processingOverlay.classList.remove('active');
                isProcessing = false;
                progressFill.style.width = "100%";
                
                // Show success message
                setTimeout(() => {
                    progressFill.style.width = "0%";
                }, 500);
                
            } catch (error) {
                console.error('Error processing PDF:', error);
                processingOverlay.classList.remove('active');
                isProcessing = false;
                
                // Fallback to sample text
                displayExtractedText(getSampleTextBasedOnFilename(file.name), "Sample Text (PDF Processing Failed)");
                alert('PDF processing encountered an error. Using sample text for demonstration.');
            }
        }
        
        // Display extracted text in the UI
        function displayExtractedText(text, title = "Extracted Text") {
            // Clean up the text
            let cleanedText = text.trim();
            
            // Remove excessive line breaks and spaces
            cleanedText = cleanedText.replace(/\n\s*\n\s*\n/g, '\n\n');
            cleanedText = cleanedText.replace(/[ \t]+/g, ' ');
            
            // Set the text
            extractedText.textContent = cleanedText;
            currentText = cleanedText;
            
            // Update text stats
            updateTextStats(cleanedText);
            
            // Update track info
            trackTitle.textContent = title;
            trackSubtitle.textContent = `${countWords(cleanedText)} words ready for audio`;
        }
        
        // Update text statistics
        function updateTextStats(text) {
            const words = countWords(text);
            const chars = text.length;
            const pages = Math.ceil(chars / 2500); // Approx 2500 chars per page
            
            wordCountEl.textContent = `Words: ${words}`;
            charCountEl.textContent = `Characters: ${chars}`;
            pageCountEl.textContent = `Pages: ${pages}`;
        }
        
        // Count words in text
        function countWords(text) {
            return text.trim().split(/\s+/).filter(word => word.length > 0).length;
        }
        
        // Get sample text based on filename
        function getSampleTextBasedOnFilename(filename) {
            const lowerName = filename.toLowerCase();
            
            if (lowerName.includes('biology') || lowerName.includes('bio')) {
                return `Biology Notes - Cell Structure

Cells are the basic unit of life. All living organisms are composed of cells. 
There are two main types of cells: prokaryotic and eukaryotic.

Prokaryotic cells lack a nucleus and membrane-bound organelles. 
Examples include bacteria and archaea.

Eukaryotic cells have a nucleus and membrane-bound organelles. 
Examples include plant and animal cells.

Key organelles include:
- Mitochondria: Energy production (ATP synthesis)
- Ribosomes: Protein synthesis
- Endoplasmic reticulum: Transport system
- Golgi apparatus: Packaging and distribution
- Nucleus: Contains genetic material (DNA)
- Chloroplasts: Photosynthesis (plant cells only)

Cell division occurs through mitosis (somatic cells) and meiosis (gamete formation).`;
            } else if (lowerName.includes('history') || lowerName.includes('hist')) {
                return `History Notes - World War II

World War II was a global war that lasted from 1939 to 1945. 
It involved the vast majority of the world's countries forming two opposing military alliances: the Allies and the Axis.

Key Events:
1. Invasion of Poland (September 1, 1939) - Start of WWII
2. Battle of Britain (1940) - Air campaign
3. Operation Barbarossa (1941) - German invasion of USSR
4. Pearl Harbor (December 7, 1941) - US entry into war
5. D-Day (June 6, 1944) - Allied invasion of Normandy
6. Atomic bombings of Hiroshima and Nagasaki (August 1945)

The war resulted in an estimated 70-85 million fatalities, making it the deadliest conflict in human history.

Key Outcomes:
- Formation of the United Nations
- Beginning of the Cold War
- Decolonization of Asia and Africa
- Establishment of Israel
- Division of Germany`;
            } else if (lowerName.includes('math') || lowerName.includes('calculus')) {
                return `Mathematics Notes - Calculus Fundamentals

Calculus is the mathematical study of continuous change. 
It has two major branches: differential calculus and integral calculus.

Differential Calculus:
- Studies instantaneous rates of change
- The derivative represents the slope of a function
- f'(x) = lim(h0) [f(x+h) - f(x)]/h
- Applications: velocity, acceleration, optimization

Integral Calculus:
- Studies accumulation of quantities
- The integral represents the area under a curve
- f(x)dx = F(x) + C where F'(x) = f(x)
- Applications: area, volume, work

Fundamental Theorem of Calculus:
[a,b] f(x)dx = F(b) - F(a)
where F is any antiderivative of f

Common Derivatives:
- d/dx(x^n) = nx^(n-1)
- d/dx(sin x) = cos x
- d/dx(e^x) = e^x
- d/dx(ln x) = 1/x

Common Integrals:
- x^n dx = x^(n+1)/(n+1) + C (n  -1)
- e^x dx = e^x + C
- 1/x dx = ln|x| + C`;
            } else {
                return `Study Notes - Learning Techniques

Effective Learning Strategies:

1. Active Recall: Actively retrieving information from memory strengthens neural connections. Test yourself regularly.

2. Spaced Repetition: Review material at increasing intervals to combat the forgetting curve.

3. Interleaving: Mix different topics or types of problems during study sessions.

4. Elaboration: Explain concepts in your own words and connect them to what you already know.

5. Concrete Examples: Use specific examples to understand abstract concepts.

6. Dual Coding: Combine verbal and visual information for better retention.

7. Retrieval Practice: Practice recalling information without looking at your notes.

Memory Principles:
- The primacy effect: Better recall for items at the beginning
- The recency effect: Better recall for items at the end
- The von Restorff effect: Distinctive items are remembered better

Study Environment:
- Find a quiet, well-lit space
- Eliminate distractions (phone, social media)
- Take regular breaks (Pomodoro technique: 25 min work, 5 min break)
- Stay hydrated and maintain good posture`;
            }
        }
        
        // Toggle text editing mode
        function toggleEditText() {
            if (extractedText.getAttribute('contenteditable') === 'true') {
                // Save edits
                extractedText.setAttribute('contenteditable', 'false');
                extractedText.style.backgroundColor = '';
                editTextBtn.innerHTML = '<i class="fas fa-edit"></i> Edit Text';
                editTextBtn.style.background = 'var(--gray)';
                
                // Update current text and stats
                currentText = extractedText.textContent;
                updateTextStats(currentText);
            } else {
                // Enable editing
                extractedText.setAttribute('contenteditable', 'true');
                extractedText.style.backgroundColor = 'rgba(255, 255, 200, 0.3)';
                extractedText.focus();
                editTextBtn.innerHTML = '<i class="fas fa-save"></i> Save Text';
                editTextBtn.style.background = 'var(--success)';
            }
        }
        
        // Generate audio lesson from extracted text
        function generateAudioLesson() {
            if (!currentText || currentText.trim().length === 0) {
                alert("Please upload notes first to generate audio.");
                return;
            }
            
            if (isProcessing) {
                alert("Please wait for OCR processing to complete.");
                return;
            }
            
            // Update track info
            trackTitle.textContent = "Your Audio Lesson";
            const wordCount = countWords(currentText);
            trackSubtitle.textContent = `${wordCount} words  ${Math.ceil(wordCount/150)} minutes`;
            
            // Stop any currently playing audio
            stopAudio();
            
            // Generate speech from text
            generateSpeech();
            
            // Start background music if selected
            const selectedMusic = document.querySelector('.music-option.active').dataset.music;
            if (selectedMusic !== 'none') {
                startBackgroundMusic(selectedMusic);
            }
            
            // Update UI
            playIcon.className = "fas fa-pause";
            isPlaying = true;
            
            // Start progress tracking
            startProgressTracking();
        }
        
        // Generate speech from text using Web Speech API
        function generateSpeech() {
            if (!speechSynthesis) {
                alert("Your browser doesn't support text-to-speech. Please try Chrome, Edge, or Safari.");
                return;
            }
            
            // Cancel any ongoing speech
            if (currentUtterance) {
                speechSynthesis.cancel();
            }
            
            // Limit text length for performance (max 5000 chars)
            const textToSpeak = currentText.length > 5000 
                ? currentText.substring(0, 5000) + "... [Text truncated for performance]" 
                : currentText;
            
            // Create new utterance
            currentUtterance = new SpeechSynthesisUtterance(textToSpeak);
            
            // Set voice properties
            currentUtterance.rate = parseFloat(speedSlider.value);
            currentUtterance.pitch = parseFloat(pitchSlider.value);
            currentUtterance.volume = 1;
            
            // Try to set voice type based on selection
            const voiceType = voiceSelect.value;
            const voices = speechSynthesis.getVoices();
            
            if (voices.length > 0) {
                // Try to find a voice that matches the selection
                let selectedVoice = voices[0];
                
                if (voiceType === 'female') {
                    selectedVoice = voices.find(v => v.name.includes('Female') || v.lang.includes('US')) || voices[0];
                } else if (voiceType === 'male') {
                    selectedVoice = voices.find(v => v.name.includes('Male') || v.name.includes('David')) || voices[0];
                }
                
                currentUtterance.voice = selectedVoice;
            }
            
            // Event listeners for speech
            currentUtterance.onend = function() {
                if (isPlaying) {
                    // Stop playback when speech ends
                    togglePlayPause();
                }
            };
            
            currentUtterance.onerror = function(event) {
                console.error('Speech synthesis error:', event);
                alert('Error generating speech. Please try again or use a different browser.');
            };
            
            // Start speech
            speechSynthesis.speak(currentUtterance);
        }
        
        // Start background music
        function startBackgroundMusic(track) {
            // Stop any existing music
            if (backgroundMusic) {
                backgroundMusic.pause();
                backgroundMusic.currentTime = 0;
            }
            
            // Background music tracks (using free sample music)
            const musicTracks = {
                classical: "https://assets.mixkit.co/music/preview/mixkit-classical-violin-216.mp3",
                ambient: "https://assets.mixkit.co/music/preview/mixkit-ambient-relax-232.mp3",
                nature: "https://assets.mixkit.co/sfx/preview/mixkit-forest-ambience-573.mp3",
                lofi: "https://assets.mixkit.co/music/preview/mixkit-chill-hop-164.mp3",
                focus: "https://assets.mixkit.co/music/preview/mixkit-deep-urban-623.mp3"
            };
            
            // Create audio element
            backgroundMusic = new Audio(musicTracks[track] || musicTracks.classical);
            backgroundMusic.loop = true;
            backgroundMusic.volume = parseFloat(musicVolume.value) / 100;
            
            // Play music
            backgroundMusic.play().catch(e => {
                console.log("Autoplay prevented. User interaction required.");
                // Autoplay might be blocked, we'll handle it when user clicks play
            });
        }
        
        // Change background music
        function changeBackgroundMusic(track) {
            if (track === 'none') {
                if (backgroundMusic) {
                    backgroundMusic.pause();
                }
                return;
            }
            
            if (isPlaying) {
                startBackgroundMusic(track);
            }
        }
        
        // Toggle play/pause
        function togglePlayPause() {
            if (!currentText || currentText.trim().length === 0) {
                alert("Please generate an audio lesson first.");
                return;
            }
            
            isPlaying = !isPlaying;
            
            if (isPlaying) {
                // Resume or start speech
                if (speechSynthesis.paused && currentUtterance) {
                    speechSynthesis.resume();
                } else if (!speechSynthesis.speaking || !currentUtterance) {
                    generateSpeech();
                }
                
                // Resume background music
                if (backgroundMusic) {
                    backgroundMusic.play().catch(e => {
                        // If autoplay blocked, try again with user gesture
                        backgroundMusic.play();
                    });
                }
                
                playIcon.className = "fas fa-pause";
                startProgressTracking();
            } else {
                // Pause speech
                speechSynthesis.pause();
                
                // Pause background music
                if (backgroundMusic) {
                    backgroundMusic.pause();
                }
                
                playIcon.className = "fas fa-play";
                clearInterval(audioProgressInterval);
            }
        }
        
        // Restart audio from beginning
        function restartAudio() {
            if (!currentText) return;
            
            speechSynthesis.cancel();
            
            if (isPlaying) {
                generateSpeech();
            }
            
            // Reset progress
            progress.style.width = '0%';
            currentTimeEl.textContent = '0:00';
        }
        
        // Skip forward 30 seconds
        function skipForward() {
            // For speech synthesis, we can't easily skip forward
            // So we'll just restart for now
            restartAudio();
        }
        
        // Seek audio by clicking on progress bar
        function seekAudio(e) {
            if (!currentText) return;
            
            const progressBarWidth = progressBarContainer.clientWidth;
            const clickPosition = e.offsetX;
            const percentage = (clickPosition / progressBarWidth) * 100;
            
            // Update progress visually
            progress.style.width = `${percentage}%`;
            
            // In a real implementation with actual audio duration, you would seek to that position
            // For speech synthesis, this is complex, so we'll just update the display
            const estimatedDuration = countWords(currentText) / 150; // Rough estimate: 150 words per minute
            const seekTime = (percentage / 100) * estimatedDuration * 60; // Convert to seconds
            
            // Format time
            currentTimeEl.textContent = formatTime(seekTime);
        }
        
        // Start tracking progress
        function startProgressTracking() {
            clearInterval(audioProgressInterval);
            
            // Estimate total duration based on word count (rough estimate)
            const wordCount = countWords(currentText);
            const wordsPerMinute = 150 * parseFloat(speedSlider.value); // Base 150 WPM adjusted by speed
            const estimatedTotalTime = wordCount / wordsPerMinute * 60; // In seconds
            
            durationEl.textContent = formatTime(estimatedTotalTime);
            
            let elapsed = 0;
            const updateInterval = 100; // Update every 100ms
            
            audioProgressInterval = setInterval(() => {
                if (!isPlaying) return;
                
                elapsed += updateInterval / 1000; // Convert to seconds
                const percentage = (elapsed / estimatedTotalTime) * 100;
                
                if (percentage <= 100) {
                    progress.style.width = `${percentage}%`;
                    currentTimeEl.textContent = formatTime(elapsed);
                } else {
                    // Audio finished
                    clearInterval(audioProgressInterval);
                    progress.style.width = '100%';
                    
                    if (isPlaying) {
                        togglePlayPause();
                    }
                }
            }, updateInterval);
        }
        
        // Stop all audio
        function stopAudio() {
            if (speechSynthesis) {
                speechSynthesis.cancel();
            }
            
            if (backgroundMusic) {
                backgroundMusic.pause();
                backgroundMusic.currentTime = 0;
            }
            
            isPlaying = false;
            playIcon.className = "fas fa-play";
            clearInterval(audioProgressInterval);
            progress.style.width = '0%';
            currentTimeEl.textContent = '0:00';
        }
        
        // Update reading speed
        function updateSpeed() {
            const speed = parseFloat(speedSlider.value);
            speedValue.textContent = `(${speed.toFixed(1)}x)`;
            
            if (currentUtterance && speechSynthesis.speaking) {
                // Update current utterance rate
                currentUtterance.rate = speed;
                
                // Need to restart speech to apply new rate
                if (isPlaying) {
                    const wasPlaying = isPlaying;
                    speechSynthesis.cancel();
                    
                    if (wasPlaying) {
                        setTimeout(() => {
                            generateSpeech();
                            startProgressTracking();
                        }, 100);
                    }
                }
            }
        }
        
        // Update voice pitch
        function updatePitch() {
            const pitch = parseFloat(pitchSlider.value);
            
            if (pitch < 0.8) {
                pitchValue.textContent = '(Low)';
            } else if (pitch > 1.2) {
                pitchValue.textContent = '(High)';
            } else {
                pitchValue.textContent = '(Normal)';
            }
            
            if (currentUtterance) {
                currentUtterance.pitch = pitch;
            }
        }
        
        // Update music volume
        function updateVolume() {
            const volume = parseInt(musicVolume.value);
            volumeValue.textContent = `(${volume}%)`;
            
            if (backgroundMusic) {
                backgroundMusic.volume = volume / 100;
            }
        }
        
        // Update voice type
        function updateVoice() {
            // In a real app, you would change the actual voice
            // For demo, we'll just note the change
            if (currentUtterance && isPlaying) {
                // Restart speech with new voice settings
                const wasPlaying = isPlaying;
                speechSynthesis.cancel();
                
                if (wasPlaying) {
                    setTimeout(() => {
                        generateSpeech();
                    }, 100);
                }
            }
        }
        
        // Update all slider value displays
        function updateSliderValues() {
            const speed = parseFloat(speedSlider.value);
            const pitch = parseFloat(pitchSlider.value);
            const volume = parseInt(musicVolume.value);
            
            speedValue.textContent = `(${speed.toFixed(1)}x)`;
            
            if (pitch < 0.8) {
                pitchValue.textContent = '(Low)';
            } else if (pitch > 1.2) {
                pitchValue.textContent = '(High)';
            } else {
                pitchValue.textContent = '(Normal)';
            }
            
            volumeValue.textContent = `(${volume}%)`;
        }
        
        // Format time in minutes:seconds
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }
        
        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
        
        // Clean up Tesseract worker when page unloads
        window.addEventListener('beforeunload', async () => {
            if (tesseractWorker) {
                await tesseractWorker.terminate();
            }
        });
    </script>
</body>
</html>